(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{9902:function(e,t,r){Promise.resolve().then(r.bind(r,3506))},3506:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var n=r(7437),i=r(2265),a=r(6497);let o=(0,a.Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),l=(0,a.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var s=r(6013),u=r(9406),c=r(4693),d=r(495),f=r(8428);function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return e.filter(e=>"Not detected"!==e.outcome).slice(0,t)}function x(e){let t=m(e,1)[0];return t?"Top trait: ".concat(t.name):"Trait snapshot"}function h(){return"This summary excludes raw DNA and individual genotypes."}var g=r(2249);function p(){let{user:e}=(0,u.a)(),[t,r]=(0,i.useState)([]),[a,p]=(0,i.useState)([]),[y,b]=(0,i.useState)(null),[v,w]=(0,i.useState)(null);(0,i.useEffect)(()=>{e&&(async()=>{var t;let n=await (0,f.nK)(e.id);r(n),n[0]&&p(await (0,f.TD)(e.id,n[0].id)),b(null!==(t=(await (0,f.is)(e.id))[0])&&void 0!==t?t:null)})()},[e]);let j=t[0],N=a.filter(e=>"Not detected"!==e.outcome).length,_=(0,i.useMemo)(()=>{if(!y)return null;let e=(0,g.a)(),t=new URL("/share",window.location.origin);return t.searchParams.set("id",y.id),e&&t.searchParams.set("ref",e),t.toString()},[y]),k=async()=>{if(!e||!j)return;if(y&&y.enabled){await (0,f.Hu)(y.id,{enabled:!1}),b({...y,enabled:!1});return}let t=m(a,5).map(e=>({traitId:e.traitId,name:e.name,category:e.category,outcome:e.outcome}));if(y){await (0,f.Hu)(y.id,{enabled:!0,topTraits:t,headline:x(a),note:h()}),b({...y,enabled:!0,topTraits:t});return}b(await (0,f.Gg)({userId:e.id,uploadId:j.id,enabled:!0,topTraits:t,headline:x(a),note:h()}))},I=async()=>{_&&(await navigator.clipboard.writeText(_),w("Link copied"),setTimeout(()=>w(null),2e3))};return(0,n.jsxs)("div",{className:"grid gap-6",children:[(0,n.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold",children:"Welcome back"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Your DNA traits overview"})]}),(0,n.jsxs)(c.C,{variant:"secondary",children:[t.length," uploads"]})]}),(0,n.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,n.jsxs)(s.Zb,{className:"border-border/70 bg-white/90",children:[(0,n.jsx)(s.Ol,{children:(0,n.jsx)(s.ll,{className:"text-sm text-muted-foreground",children:"Uploads"})}),(0,n.jsx)(s.aY,{className:"text-3xl font-semibold",children:t.length})]}),(0,n.jsxs)(s.Zb,{className:"border-border/70 bg-white/90",children:[(0,n.jsx)(s.Ol,{children:(0,n.jsx)(s.ll,{className:"text-sm text-muted-foreground",children:"Traits generated"})}),(0,n.jsx)(s.aY,{className:"text-3xl font-semibold",children:N})]}),(0,n.jsxs)(s.Zb,{className:"border-border/70 bg-white/90",children:[(0,n.jsx)(s.Ol,{children:(0,n.jsx)(s.ll,{className:"text-sm text-muted-foreground",children:"Last processed"})}),(0,n.jsx)(s.aY,{className:"text-lg font-semibold",children:(null==j?void 0:j.processedAt)?new Date(j.processedAt).toLocaleString():"Not processed yet"})]})]}),(0,n.jsxs)(s.Zb,{className:"border-border/70 bg-white/90",children:[(0,n.jsx)(s.Ol,{children:(0,n.jsx)(s.ll,{children:"Share a public summary"})}),(0,n.jsxs)(s.aY,{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,n.jsxs)("div",{className:"space-y-1 text-sm text-muted-foreground",children:[(0,n.jsx)("p",{children:"Share your top traits without exposing raw DNA or genotypes."}),(0,n.jsx)("p",{children:"Sharing is disabled by default."})]}),(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,n.jsxs)(d.z,{variant:"secondary",onClick:k,disabled:!j,children:[(0,n.jsx)(o,{className:"h-4 w-4"}),(null==y?void 0:y.enabled)?"Disable share":"Enable share"]}),(0,n.jsxs)(d.z,{variant:"outline",onClick:I,disabled:!(null==y?void 0:y.enabled)||!_,children:[(0,n.jsx)(l,{className:"h-4 w-4"}),null!=v?v:"Copy link"]})]})]})]})]})}},2249:function(e,t,r){"use strict";r.d(t,{ReferrerTracker:function(){return o},a:function(){return l}});var n=r(6463),i=r(2265);let a="genomelink_referral";function o(){let e=(0,n.useSearchParams)();return(0,i.useEffect)(()=>{let t=e.get("ref");t&&window.localStorage.setItem(a,t)},[e]),null}function l(){return window.localStorage.getItem(a)}},4693:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var n=r(7437),i=r(3027);r(2265);var a=r(7440);let o=(0,i.j)("inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold transition",{variants:{variant:{default:"border-emerald-200 bg-emerald-50 text-emerald-700",secondary:"border-border bg-muted text-foreground",outline:"border-border text-foreground",destructive:"border-red-200 bg-red-50 text-red-700"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...i}=e;return(0,n.jsx)("div",{className:(0,a.cn)(o({variant:r}),t),...i})}},495:function(e,t,r){"use strict";r.d(t,{z:function(){return u}});var n=r(7437),i=r(2265),a=r(1538),o=r(3027),l=r(7440);let s=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-2xl text-sm font-semibold transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-60 ring-offset-background shadow-[0_10px_40px_-28px_rgba(16,185,129,0.8)]",{variants:{variant:{default:"bg-gradient-to-r from-emerald-500 to-cyan-500 text-white hover:brightness-110",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",secondary:"border border-border bg-white/70 text-foreground hover:border-foreground/60 hover:bg-white/80",ghost:"hover:bg-muted/80 text-foreground",outline:"border border-emerald-200 text-foreground hover:border-emerald-400 hover:bg-emerald-50",link:"text-emerald-600 underline-offset-4 hover:underline"},size:{default:"h-11 px-5",sm:"h-9 rounded-xl px-4 text-xs",lg:"h-12 rounded-3xl px-6 text-base",icon:"h-11 w-11 rounded-2xl"}},defaultVariants:{variant:"default",size:"default"}}),u=i.forwardRef((e,t)=>{let{className:r,variant:i,size:o,asChild:u=!1,...c}=e,d=u?a.g7:"button";return(0,n.jsx)(d,{className:(0,l.cn)(s({variant:i,size:o,className:r})),ref:t,...c})});u.displayName="Button"},6013:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return u},Zb:function(){return o},aY:function(){return c},eW:function(){return d},ll:function(){return s}});var n=r(7437),i=r(2265),a=r(7440);let o=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("glass-panel rounded-3xl border border-white/60 bg-white/80 p-6 shadow-soft transition hover:-translate-y-1 hover:shadow-glow dark:bg-white/10",r),...i})});o.displayName="Card";let l=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("mb-4 flex flex-col gap-2",r),...i})});l.displayName="CardHeader";let s=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("h3",{ref:t,className:(0,a.cn)("text-lg font-semibold",r),...i})});s.displayName="CardTitle";let u=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...i})});u.displayName="CardDescription";let c=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col gap-4",r),...i})});c.displayName="CardContent";let d=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("mt-4 flex items-center justify-between",r),...i})});d.displayName="CardFooter"},8428:function(e,t,r){"use strict";r.d(t,{Gg:function(){return x},Gw:function(){return y},H6:function(){return N},HZ:function(){return v},Hu:function(){return h},KK:function(){return d},RJ:function(){return g},TD:function(){return m},VP:function(){return b},af:function(){return w},g7:function(){return j},gI:function(){return u},iP:function(){return s},is:function(){return p},kz:function(){return f},nK:function(){return c}});var n=r(885),i=r(261),a=r(3602),o=r(9132),l=r(753);async function s(e,t){return n.I_?i.iP(e,t):a.iP(e,t)}async function u(e,t,r){return n.I_?i.gI(e,t,r):a.gI(t,r)}async function c(e){return n.I_?i.nK(e):a.nK(e)}async function d(e,t,r){return n.I_?i.KK(e,t,r):a.KK(t,r)}async function f(e,t,r){return n.I_?i.kz(e,t,r):a.kz(t,r)}async function m(e,t){return n.I_?i.TD(e,t):a.TD(t)}async function x(e){return n.I_?i.Gg(e):a.Gg(e)}async function h(e,t){return n.I_?i.Hu(e,t):a.Hu(e,t)}async function g(e){return n.I_?i.RJ(e):a.RJ(e)}async function p(e){return n.I_?i.is(e):a.is(e)}async function y(e){return n.I_?i.Gw(e):a.Gw()}async function b(e,t){return n.I_?i.VP(e,t):a.VP(t)}async function v(e,t){return n.I_?i.HZ(e,t):a.HZ(t)}async function w(e){return n.I_?i.af(e):a.af(e)}async function j(e,t,r,i,a,s){return n.I_?o.g7(e,t,r,i,a):l.g7(e,t,r,i,a,s)}async function N(e,t){return n.I_?o.H6(e,t):l.H6(e,t)}},7440:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var n=r(4839),i=r(6164);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.m6)((0,n.W)(t))}},6463:function(e,t,r){"use strict";var n=r(1169);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},1584:function(e,t,r){"use strict";r.d(t,{F:function(){return a},e:function(){return o}});var n=r(2265);function i(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function a(...e){return t=>{let r=!1,n=e.map(e=>{let n=i(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():i(e[t],null)}}}}function o(...e){return n.useCallback(a(...e),e)}},1538:function(e,t,r){"use strict";r.d(t,{Z8:function(){return c},g7:function(){return d}});var n,i=r(2265),a=r(1584),o=r(7437),l=Symbol.for("react.lazy"),s=(n||(n=r.t(i,2)))[" use ".trim().toString()];function u(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===l&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function c(e){let t=function(e){let t=i.forwardRef((e,t)=>{let{children:r,...n}=e;if(u(r)&&"function"==typeof s&&(r=s(r._payload)),i.isValidElement(r)){var o;let e,l;let s=(o=r,(e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?o.ref:(e=Object.getOwnPropertyDescriptor(o,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?o.props.ref:o.props.ref||o.ref),u=function(e,t){let r={...t};for(let n in t){let i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...e)=>{let t=a(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]={...i,...a}:"className"===n&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==i.Fragment&&(u.ref=t?(0,a.F)(t,s):s),i.cloneElement(r,u)}return i.Children.count(r)>1?i.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=i.forwardRef((e,r)=>{let{children:n,...a}=e;u(n)&&"function"==typeof s&&(n=s(n._payload));let l=i.Children.toArray(n),c=l.find(m);if(c){let e=c.props.children,n=l.map(t=>t!==c?t:i.Children.count(e)>1?i.Children.only(null):i.isValidElement(e)?e.props.children:null);return(0,o.jsx)(t,{...a,ref:r,children:i.isValidElement(e)?i.cloneElement(e,void 0,n):null})}return(0,o.jsx)(t,{...a,ref:r,children:n})});return r.displayName=`${e}.Slot`,r}var d=c("Slot"),f=Symbol("radix.slottable");function m(e){return i.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===f}},6497:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(2265);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:s,className:u="",children:c,iconNode:d,...f}=e;return(0,n.createElement)("svg",{ref:t,...o,width:i,height:i,stroke:r,strokeWidth:s?24*Number(l)/Number(i):l,className:a("lucide",u),...f},[...d.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),s=(e,t)=>{let r=(0,n.forwardRef)((r,o)=>{let{className:s,...u}=r;return(0,n.createElement)(l,{ref:o,iconNode:t,className:a("lucide-".concat(i(e)),s),...u})});return r.displayName="".concat(e),r}}},function(e){e.O(0,[358,637,717,934,406,971,23,744],function(){return e(e.s=9902)}),_N_E=e.O()}]);