(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[754],{2585:function(e,t,r){Promise.resolve().then(r.bind(r,2075))},2075:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var s=r(7437),n=r(2265),l=r(6497);let a=(0,l.Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var i=r(3987);let o=(0,l.Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),d=(0,l.Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),c=(0,l.Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var u=r(495),f=r(6013),m=r(3102),p=r(7412),x=r(4693),h=r(9406),y=r(9854),g=r(9186);async function b(e,t,r){let s=(0,g.G)();if(!s)throw Error("Firebase not configured");let n=(0,y.cF)(s),l="".concat(Date.now(),"_").concat(t.name),a="users/".concat(e,"/raw/").concat(l),i=(0,y.iH)(n,a);if(!r)return await (0,y.KV)(i,t),{path:a,downloadURL:await (0,y.Jt)(i)};{let e=(0,y.B0)(i,t);return new Promise((t,s)=>{e.on("state_changed",e=>{r(e.bytesTransferred/e.totalBytes*100)},e=>{s(e)},async()=>{t({path:a,downloadURL:await (0,y.Jt)(e.snapshot.ref)})})})}}var j=r(9842),v=r(885);let N=[".txt",".csv"];function w(){let{user:e}=(0,h.a)(),[t,r]=(0,n.useState)([]),[l,c]=(0,n.useState)(!1),[x,y]=(0,n.useState)(0),[w,k]=(0,n.useState)(null),[S,A]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(!e||!v.I_)return;let t=function(e,t){let r=(0,g.G)();if(!r)return t([]),()=>{};let s=(0,j.ad)(r),n=(0,j.hJ)(s,"users",e,"dna_results");return(0,j.cf)(n,e=>{t(e.docs.map(e=>({id:e.id,...e.data()})))},e=>{console.error("Error listening to DNA processing results:",e),t([])})}(e.id,e=>{r(e.sort((e,t)=>{let r=e.processedAt||"";return(t.processedAt||"").localeCompare(r)}))});return()=>t()},[e]);let _=async()=>{if(e&&S&&v.I_){k(null),c(!0),y(0);try{let t=await b(e.id,S,e=>{y(Math.round(e))});console.log("File uploaded successfully:",t),A(null),y(0);let r=document.getElementById("dna-file-input");r&&(r.value="")}catch(e){console.error("Upload error:",e),k(e instanceof Error?e.message:"Failed to upload file")}finally{c(!1)}}};return v.I_?e?(0,s.jsxs)("div",{className:"container py-8 space-y-8",children:[(0,s.jsxs)(f.Zb,{children:[(0,s.jsxs)(f.Ol,{children:[(0,s.jsx)(f.ll,{children:"Cloud DNA Processing"}),(0,s.jsx)(f.SZ,{children:"Upload your raw DNA file (23andMe, AncestryDNA, MyHeritage). Files are processed automatically and results appear below."})]}),(0,s.jsxs)(f.aY,{className:"space-y-4",children:[w&&(0,s.jsxs)(p.b,{variant:"destructive",children:[(0,s.jsx)(a,{className:"h-4 w-4"}),(0,s.jsx)(p.X,{children:w})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m.I,{id:"dna-file-input",type:"file",accept:N.join(","),onChange:e=>{var t;k(null);let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!r)return;let s=r.name.slice(r.name.lastIndexOf(".")).toLowerCase();if(!N.includes(s)){k("Unsupported file type. Allowed: ".concat(N.join(", ")));return}if(r.size>104857600){k("File too large. Maximum size is 100MB.");return}A(r)},disabled:l}),S&&(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Selected: ",S.name," (",(S.size/1024/1024).toFixed(2)," MB)"]})]}),l&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{children:"Uploading..."}),(0,s.jsxs)("span",{children:[x,"%"]})]}),(0,s.jsx)("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-primary transition-all duration-300",style:{width:"".concat(x,"%")}})})]}),(0,s.jsxs)(u.z,{onClick:_,disabled:!S||l,className:"w-full",children:[(0,s.jsx)(i.Z,{className:"mr-2 h-4 w-4"}),l?"Uploading...":"Upload & Process"]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Files are processed automatically by Cloud Functions. Results typically appear within 1-2 minutes."})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold",children:"Processing Results"}),0===t.length?(0,s.jsx)(f.Zb,{children:(0,s.jsxs)(f.aY,{className:"pt-6 text-center text-muted-foreground",children:[(0,s.jsx)(o,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,s.jsx)("p",{children:"No DNA files processed yet. Upload a file above to get started."})]})}):t.map(e=>(0,s.jsxs)(f.Zb,{children:[(0,s.jsx)(f.Ol,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(f.ll,{className:"text-lg",children:e.fileName}),(0,s.jsxs)(f.SZ,{children:["File ID: ",e.id," â€¢ ",(e.fileSize/1024/1024).toFixed(2)," MB"]})]}),(0,s.jsx)(C,{status:e.status})]})}),(0,s.jsxs)(f.aY,{className:"space-y-4",children:["processing"===e.status&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,s.jsx)(d,{className:"h-4 w-4 animate-spin"}),(0,s.jsx)("span",{children:"Processing file... This may take 1-2 minutes."})]}),"completed"===e.status&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Total SNPs:"}),(0,s.jsx)("p",{className:"font-semibold",children:e.totalSnps.toLocaleString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Processed:"}),(0,s.jsx)("p",{className:"font-semibold",children:e.processedAt?new Date(e.processedAt).toLocaleString():"N/A"})]})]}),e.sampleSnps&&e.sampleSnps.length>0&&(0,s.jsxs)("details",{className:"text-sm",children:[(0,s.jsxs)("summary",{className:"cursor-pointer font-semibold mb-2",children:["Sample SNPs (first ",e.sampleSnps.length,")"]}),(0,s.jsx)("div",{className:"bg-muted p-4 rounded-md overflow-auto max-h-64",children:(0,s.jsxs)("table",{className:"w-full text-xs font-mono",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b",children:[(0,s.jsx)("th",{className:"text-left py-1",children:"rsID"}),(0,s.jsx)("th",{className:"text-left py-1",children:"Chr"}),(0,s.jsx)("th",{className:"text-left py-1",children:"Position"}),(0,s.jsx)("th",{className:"text-left py-1",children:"Genotype"})]})}),(0,s.jsx)("tbody",{children:e.sampleSnps.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b border-border/50",children:[(0,s.jsx)("td",{className:"py-1",children:e.rsid}),(0,s.jsx)("td",{className:"py-1",children:e.chromosome}),(0,s.jsx)("td",{className:"py-1",children:e.position}),(0,s.jsx)("td",{className:"py-1",children:e.genotype})]},t))})]})})]})]}),"failed"===e.status&&e.error&&(0,s.jsxs)(p.b,{variant:"destructive",children:[(0,s.jsx)(a,{className:"h-4 w-4"}),(0,s.jsx)(p.X,{children:e.error})]})]})]},e.id))]})]}):(0,s.jsx)("div",{className:"container py-8",children:(0,s.jsxs)(p.b,{children:[(0,s.jsx)(a,{className:"h-4 w-4"}),(0,s.jsx)(p.X,{children:"Please sign in to use cloud DNA processing."})]})}):(0,s.jsx)("div",{className:"container py-8",children:(0,s.jsxs)(p.b,{children:[(0,s.jsx)(a,{className:"h-4 w-4"}),(0,s.jsx)(p.X,{children:"Cloud processing is only available when Firebase is enabled. Currently running in mock mode."})]})})}function C(e){let{status:t}=e;switch(t){case"processing":return(0,s.jsxs)(x.C,{variant:"secondary",className:"gap-1",children:[(0,s.jsx)(d,{className:"h-3 w-3 animate-spin"}),"Processing"]});case"completed":return(0,s.jsxs)(x.C,{variant:"default",className:"gap-1 bg-green-600 text-white border-green-600",children:[(0,s.jsx)(c,{className:"h-3 w-3"}),"Completed"]});case"failed":return(0,s.jsxs)(x.C,{variant:"destructive",className:"gap-1",children:[(0,s.jsx)(a,{className:"h-3 w-3"}),"Failed"]})}}},7412:function(e,t,r){"use strict";r.d(t,{X:function(){return i},b:function(){return a}});var s=r(7437),n=r(2265),l=r(7440);let a=n.forwardRef((e,t)=>{let{className:r,variant:n="default",...a}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,l.cn)("relative w-full rounded-lg border px-4 py-3 text-sm","destructive"===n?"border-destructive/40 bg-destructive/5 text-destructive":"border-border bg-white/90 text-foreground",r),...a})});a.displayName="Alert";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...n})});i.displayName="AlertDescription"},4693:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var s=r(7437),n=r(3027);r(2265);var l=r(7440);let a=(0,n.j)("inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold transition",{variants:{variant:{default:"border-emerald-200 bg-emerald-50 text-emerald-700",secondary:"border-border bg-muted text-foreground",outline:"border-border text-foreground",destructive:"border-red-200 bg-red-50 text-red-700"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...n}=e;return(0,s.jsx)("div",{className:(0,l.cn)(a({variant:r}),t),...n})}},495:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var s=r(7437),n=r(2265),l=r(1538),a=r(3027),i=r(7440);let o=(0,a.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-2xl text-sm font-semibold transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-60 ring-offset-background shadow-[0_10px_40px_-28px_rgba(16,185,129,0.8)]",{variants:{variant:{default:"bg-gradient-to-r from-emerald-500 to-cyan-500 text-white hover:brightness-110",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",secondary:"border border-border bg-white/70 text-foreground hover:border-foreground/60 hover:bg-white/80",ghost:"hover:bg-muted/80 text-foreground",outline:"border border-emerald-200 text-foreground hover:border-emerald-400 hover:bg-emerald-50",link:"text-emerald-600 underline-offset-4 hover:underline"},size:{default:"h-11 px-5",sm:"h-9 rounded-xl px-4 text-xs",lg:"h-12 rounded-3xl px-6 text-base",icon:"h-11 w-11 rounded-2xl"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:r,variant:n,size:a,asChild:d=!1,...c}=e,u=d?l.g7:"button";return(0,s.jsx)(u,{className:(0,i.cn)(o({variant:n,size:a,className:r})),ref:t,...c})});d.displayName="Button"},6013:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return a},aY:function(){return c},eW:function(){return u},ll:function(){return o}});var s=r(7437),n=r(2265),l=r(7440);let a=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("glass-panel rounded-3xl border border-white/60 bg-white/80 p-6 shadow-soft transition hover:-translate-y-1 hover:shadow-glow dark:bg-white/10",r),...n})});a.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("mb-4 flex flex-col gap-2",r),...n})});i.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("h3",{ref:t,className:(0,l.cn)("text-lg font-semibold",r),...n})});o.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col gap-4",r),...n})});c.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("mt-4 flex items-center justify-between",r),...n})});u.displayName="CardFooter"},3102:function(e,t,r){"use strict";r.d(t,{I:function(){return a}});var s=r(7437),n=r(2265),l=r(7440);let a=n.forwardRef((e,t)=>{let{className:r,type:n,...a}=e;return(0,s.jsx)("input",{type:n,className:(0,l.cn)("flex h-11 w-full rounded-2xl border border-input bg-white/60 px-4 text-sm shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-60 dark:bg-white/10",r),ref:t,...a})});a.displayName="Input"},7440:function(e,t,r){"use strict";r.d(t,{cn:function(){return l}});var s=r(4839),n=r(6164);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}},1584:function(e,t,r){"use strict";r.d(t,{F:function(){return l},e:function(){return a}});var s=r(2265);function n(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function l(...e){return t=>{let r=!1,s=e.map(e=>{let s=n(e,t);return r||"function"!=typeof s||(r=!0),s});if(r)return()=>{for(let t=0;t<s.length;t++){let r=s[t];"function"==typeof r?r():n(e[t],null)}}}}function a(...e){return s.useCallback(l(...e),e)}},1538:function(e,t,r){"use strict";r.d(t,{Z8:function(){return c},g7:function(){return u}});var s,n=r(2265),l=r(1584),a=r(7437),i=Symbol.for("react.lazy"),o=(s||(s=r.t(n,2)))[" use ".trim().toString()];function d(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===i&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function c(e){let t=function(e){let t=n.forwardRef((e,t)=>{let{children:r,...s}=e;if(d(r)&&"function"==typeof o&&(r=o(r._payload)),n.isValidElement(r)){var a;let e,i;let o=(a=r,(e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?a.ref:(e=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?a.props.ref:a.props.ref||a.ref),d=function(e,t){let r={...t};for(let s in t){let n=e[s],l=t[s];/^on[A-Z]/.test(s)?n&&l?r[s]=(...e)=>{let t=l(...e);return n(...e),t}:n&&(r[s]=n):"style"===s?r[s]={...n,...l}:"className"===s&&(r[s]=[n,l].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props);return r.type!==n.Fragment&&(d.ref=t?(0,l.F)(t,o):o),n.cloneElement(r,d)}return n.Children.count(r)>1?n.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=n.forwardRef((e,r)=>{let{children:s,...l}=e;d(s)&&"function"==typeof o&&(s=o(s._payload));let i=n.Children.toArray(s),c=i.find(m);if(c){let e=c.props.children,s=i.map(t=>t!==c?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,a.jsx)(t,{...l,ref:r,children:n.isValidElement(e)?n.cloneElement(e,void 0,s):null})}return(0,a.jsx)(t,{...l,ref:r,children:s})});return r.displayName=`${e}.Slot`,r}var u=c("Slot"),f=Symbol("radix.slottable");function m(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===f}},6497:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var s=r(2265);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:u,...f}=e;return(0,s.createElement)("svg",{ref:t,...a,width:n,height:n,stroke:r,strokeWidth:o?24*Number(i)/Number(n):i,className:l("lucide",d),...f},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let r=(0,s.forwardRef)((r,a)=>{let{className:o,...d}=r;return(0,s.createElement)(i,{ref:a,iconNode:t,className:l("lucide-".concat(n(e)),o),...d})});return r.displayName="".concat(e),r}},3987:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(6497).Z)("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]])}},function(e){e.O(0,[358,637,717,934,406,971,23,744],function(){return e(e.s=2585)}),_N_E=e.O()}]);