"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[406],{9406:function(t,n,e){e.d(n,{AuthProvider:function(){return m},a:function(){return v},X:function(){return O}});var r={};e.r(r),e.d(r,{getCurrentUser:function(){return w},onAuthStateChanged:function(){return f},signInWithEmail:function(){return E},signInWithGoogle:function(){return _},signOut:function(){return I},signUpWithEmail:function(){return d}});var i={};e.r(i),e.d(i,{getCurrentUser:function(){return T},onAuthStateChanged:function(){return y},signInWithEmail:function(){return S},signInWithGoogle:function(){return N},signOut:function(){return P},signUpWithEmail:function(){return h}});var a=e(7437),u=e(2265),o=e(885),s=e(5186),c=e(9186);function l(t){var n,e,r,i,a;return{id:t.uid,email:null!==(e=t.email)&&void 0!==e?e:void 0,name:null!==(r=t.displayName)&&void 0!==r?r:null===(n=t.email)||void 0===n?void 0:n.split("@")[0],photoURL:null!==(i=t.photoURL)&&void 0!==i?i:void 0,createdAt:new Date(null!==(a=t.metadata.creationTime)&&void 0!==a?a:Date.now()).toISOString()}}function f(t){let n=(0,c.G)();if(!n)return t(null),()=>void 0;let e=(0,s.v0)(n);return(0,s.Aj)(e,n=>{t(n?l(n):null)})}async function E(t,n){let e=(0,c.G)();if(!e)throw Error("Firebase not configured");let r=(0,s.v0)(e);return l((await (0,s.e5)(r,t,n)).user)}async function d(t,n){let e=(0,c.G)();if(!e)throw Error("Firebase not configured");let r=(0,s.v0)(e);return l((await (0,s.Xb)(r,t,n)).user)}async function _(){let t=(0,c.G)();if(!t)throw Error("Firebase not configured");let n=(0,s.v0)(t),e=new s.hJ;return l((await (0,s.rh)(n,e)).user)}async function I(){let t=(0,c.G)();if(!t)return;let n=(0,s.v0)(t);await (0,s.w7)(n)}function w(){let t=(0,c.G)();if(!t)return null;let n=(0,s.v0)(t);return n.currentUser?l(n.currentUser):null}var B=e(3202),p=e(2860);let A=new Set;function U(t){A.forEach(n=>n(t))}function y(t){A.add(t);let n=(0,p.qB)(),e=n.sessions.currentUserId,r=e?n.users[e]:null;return t(null!=r?r:null),()=>A.delete(t)}async function S(t,n){if(!t||!n)throw Error("Missing credentials");let e=Object.values((0,p.qB)().users).find(n=>n.email===t);if(e)return(0,p.ui)(e.id),U(e),e;throw Error("No user found. Create an account first.")}async function h(t,n){if(!t||!n)throw Error("Missing credentials");let e=(0,B.O)("user"),r={id:e,email:t,name:t.split("@")[0],createdAt:new Date().toISOString()};return(0,p.ow)(t=>({...t,users:{...t.users,[e]:r},sessions:{...t.sessions,currentUserId:e}})),U(r),r}async function N(){let t=(0,B.O)("user"),n={id:t,email:"mock.user@example.com",name:"Mock User",createdAt:new Date().toISOString()};return(0,p.ow)(e=>({...e,users:{...e.users,[t]:n},sessions:{...e.sessions,currentUserId:t}})),U(n),n}async function P(){(0,p.ui)(void 0),U(null)}function T(){let t=(0,p.qB)(),n=t.sessions.currentUserId;return n?t.users[n]:null}e(261),e(3602),e(9132),e(753);let g=o.I_?r:i,C=(0,u.createContext)(void 0);function m(t){let{children:n}=t,[e,r]=(0,u.useState)(null),[i,o]=(0,u.useState)(!0);(0,u.useEffect)(()=>{let t=g.onAuthStateChanged(t=>{r(t),o(!1)});return()=>null==t?void 0:t()},[]);let s=async(t,n)=>{o(!0),await g.signInWithEmail(t,n),o(!1)},c=async(t,n)=>{o(!0),await g.signUpWithEmail(t,n),o(!1)},l=async()=>{o(!0),await g.signInWithGoogle(),o(!1)},f=async()=>{await g.signOut()},E=(0,u.useMemo)(()=>({user:e,loading:i,signInWithEmail:s,signUpWithEmail:c,signInWithGoogle:l,signOut:f}),[e,i]);return(0,a.jsx)(C.Provider,{value:E,children:n})}function v(){let t=(0,u.useContext)(C);if(!t)throw Error("useAuth must be used within AuthProvider");return t}function O(){return o.I_?"Firebase":"Mock"}},1860:function(t,n,e){function r(t){return btoa(String.fromCharCode(...t))}async function i(){let t=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return r(new Uint8Array(await crypto.subtle.exportKey("raw",t)))}async function a(t){let n=function(t){let n=atob(t),e=new Uint8Array(n.length);for(let t=0;t<n.length;t+=1)e[t]=n.charCodeAt(t);return e}(t);return crypto.subtle.importKey("raw",n,"AES-GCM",!1,["encrypt","decrypt"])}async function u(t,n){let e=await a(n),i=crypto.getRandomValues(new Uint8Array(12)),u=await crypto.subtle.encrypt({name:"AES-GCM",iv:i},e,t);return{iv:r(i),data:r(new Uint8Array(u))}}e.d(n,{Pj:function(){return u},cU:function(){return i}})},885:function(t,n,e){e.d(n,{I_:function(){return s},OB:function(){return o},X6:function(){return c},oo:function(){return l}});var r,i=e(537),a=e(357);let u=i.Ry({NEXT_PUBLIC_FIREBASE_API_KEY:i.Z_().optional(),NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN:i.Z_().optional(),NEXT_PUBLIC_FIREBASE_PROJECT_ID:i.Z_().optional(),NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET:i.Z_().optional(),NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID:i.Z_().optional(),NEXT_PUBLIC_FIREBASE_APP_ID:i.Z_().optional(),NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID:i.Z_().optional(),NEXT_PUBLIC_USE_FIREBASE:i.Z_().optional(),NEXT_PUBLIC_BASE_PATH:i.Z_().optional(),NEXT_PUBLIC_RETENTION_DAYS:i.Z_().optional(),NEXT_PUBLIC_ENABLE_ENCRYPTION:i.Z_().optional()}).safeParse({NEXT_PUBLIC_FIREBASE_API_KEY:"AIzaSyDtafp70xJzU-xeRmP8UAigX5YGKiykuNw",NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN:"dnax-matmiluxai-2026.firebaseapp.com",NEXT_PUBLIC_FIREBASE_PROJECT_ID:"dnax-matmiluxai-2026",NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET:"dnax-matmiluxai-2026.firebasestorage.app",NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID:"193259852525",NEXT_PUBLIC_FIREBASE_APP_ID:"1:193259852525:web:8fe3829ee4aa20cae5b2e4",NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID:a.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID,NEXT_PUBLIC_USE_FIREBASE:"true",NEXT_PUBLIC_BASE_PATH:"/dnax",NEXT_PUBLIC_RETENTION_DAYS:a.env.NEXT_PUBLIC_RETENTION_DAYS,NEXT_PUBLIC_ENABLE_ENCRYPTION:a.env.NEXT_PUBLIC_ENABLE_ENCRYPTION});u.success||console.warn("Environment validation failed",u.error.flatten().fieldErrors);let o=u.success?u.data:{},s=!!("true"===o.NEXT_PUBLIC_USE_FIREBASE&&o.NEXT_PUBLIC_FIREBASE_API_KEY&&o.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN&&o.NEXT_PUBLIC_FIREBASE_PROJECT_ID&&o.NEXT_PUBLIC_FIREBASE_APP_ID),c=Number(null!==(r=o.NEXT_PUBLIC_RETENTION_DAYS)&&void 0!==r?r:"7"),l="true"===o.NEXT_PUBLIC_ENABLE_ENCRYPTION},9186:function(t,n,e){e.d(n,{G:function(){return u}});var r=e(5236),i=e(885);let a=i.I_?{apiKey:i.OB.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:i.OB.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:i.OB.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:i.OB.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:i.OB.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:i.OB.NEXT_PUBLIC_FIREBASE_APP_ID,measurementId:i.OB.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID}:null;function u(){return i.I_&&a?(0,r.C6)().length?(0,r.C6)()[0]:(0,r.ZF)(a):null}},261:function(t,n,e){e.d(n,{Gg:function(){return d},Gw:function(){return B},HZ:function(){return A},Hu:function(){return _},KK:function(){return l},RJ:function(){return I},TD:function(){return E},VP:function(){return p},af:function(){return U},gI:function(){return s},iP:function(){return o},is:function(){return w},kz:function(){return f},nK:function(){return c}});var r=e(9842),i=e(9186),a=e(3202);function u(){let t=(0,i.G)();return t?(0,r.ad)(t):null}async function o(t,n){let e=u();if(!e)throw Error("Firebase not configured");let i=(0,a.O)("upload"),o={...n,id:i,userId:t};return await (0,r.pl)((0,r.JU)(e,"users",t,"uploads",i),o),o}async function s(t,n,e){let i=u();i&&await (0,r.r7)((0,r.JU)(i,"users",t,"uploads",n),e)}async function c(t){let n=u();if(!n)return[];let e=(0,r.IO)((0,r.hJ)(n,"users",t,"uploads"),(0,r.Xo)("createdAt","desc"));return(await (0,r.PL)(e)).docs.map(t=>t.data())}async function l(t,n,e){let i=u();i&&await (0,r.pl)((0,r.JU)(i,"users",t,"normalized",n),e)}async function f(t,n,e){let i=u();i&&await (0,r.pl)((0,r.JU)(i,"users",t,"traits",n),{uploadId:n,results:e,updatedAt:new Date().toISOString()})}async function E(t,n){var e;let i=u();if(!i)return[];let a=await (0,r.QT)((0,r.JU)(i,"users",t,"traits",n));return a.exists()&&null!==(e=a.data().results)&&void 0!==e?e:[]}async function d(t){let n=u();if(!n)throw Error("Firebase not configured");let e=(0,a.O)("share"),i={...t,id:e,createdAt:new Date().toISOString()};return await (0,r.pl)((0,r.JU)(n,"shares",e),i),i}async function _(t,n){let e=u();e&&await (0,r.r7)((0,r.JU)(e,"shares",t),n)}async function I(t){let n=u();if(!n)return null;let e=await (0,r.QT)((0,r.JU)(n,"shares",t));return e.exists()?e.data():null}async function w(t){let n=u();if(!n)return[];let e=(0,r.IO)((0,r.hJ)(n,"shares"));return(await (0,r.PL)(e)).docs.map(t=>t.data()).filter(n=>n.userId===t)}async function B(t){let n=u();if(!n)return null;let e=await (0,r.QT)((0,r.JU)(n,"users",t,"settings","profile"));return e.exists()?e.data():null}async function p(t,n){let e=u();e&&await (0,r.pl)((0,r.JU)(e,"users",t,"settings","profile"),n,{merge:!0})}async function A(t,n){let e=u();e&&(await (0,r.oe)((0,r.JU)(e,"users",t,"uploads",n)),await (0,r.oe)((0,r.JU)(e,"users",t,"normalized",n)),await (0,r.oe)((0,r.JU)(e,"users",t,"traits",n)))}async function U(t){let n=u();if(!n)return;let e=(0,r.qs)(n);(await (0,r.PL)((0,r.hJ)(n,"users",t,"uploads"))).docs.forEach(t=>e.delete(t.ref)),(await (0,r.PL)((0,r.hJ)(n,"users",t,"normalized"))).docs.forEach(t=>e.delete(t.ref)),(await (0,r.PL)((0,r.hJ)(n,"users",t,"traits"))).docs.forEach(t=>e.delete(t.ref)),(await (0,r.PL)((0,r.hJ)(n,"shares"))).docs.forEach(n=>{n.data().userId===t&&e.delete(n.ref)}),await e.commit()}},9132:function(t,n,e){e.d(n,{H6:function(){return s},g7:function(){return o}});var r=e(9854),i=e(9186),a=e(1860);function u(){let t=(0,i.G)();return t?(0,r.cF)(t):null}async function o(t,n,e,i,o){let s=u();if(!s)return;if(i&&o){let i=new Blob([JSON.stringify(await (0,a.Pj)(e,o))],{type:"application/json"});await (0,r.KV)((0,r.iH)(s,"users/".concat(t,"/raw/").concat(n,".json")),i,{contentType:"application/json"});return}let c=new Blob([e],{type:"text/plain"});await (0,r.KV)((0,r.iH)(s,"users/".concat(t,"/raw/").concat(n,".txt")),c,{contentType:"text/plain"})}async function s(t,n){let e=u();if(!e)return;let i=(0,r.iH)(e,"users/".concat(t,"/raw/").concat(n,".txt")),a=(0,r.iH)(e,"users/".concat(t,"/raw/").concat(n,".json"));try{await (0,r.oq)(i)}catch(t){}try{await (0,r.oq)(a)}catch(t){}}},3602:function(t,n,e){e.d(n,{Gg:function(){return E},Gw:function(){return w},HZ:function(){return f},Hu:function(){return d},KK:function(){return s},RJ:function(){return _},TD:function(){return l},VP:function(){return B},af:function(){return p},gI:function(){return u},iP:function(){return a},is:function(){return I},kz:function(){return c},nK:function(){return o}});var r=e(3202),i=e(2860);async function a(t,n){let e=(0,r.O)("upload"),a={...n,id:e,userId:t};return(0,i.ow)(t=>({...t,uploads:{...t.uploads,[e]:a}})),a}async function u(t,n){(0,i.ow)(e=>{let r=e.uploads[t];return r?{...e,uploads:{...e.uploads,[t]:{...r,...n}}}:e})}async function o(t){return Object.values((0,i.qB)().uploads).filter(n=>n.userId===t).sort((t,n)=>t.createdAt<n.createdAt?1:-1)}async function s(t,n){(0,i.ow)(e=>({...e,normalized:{...e.normalized,[t]:n}}))}async function c(t,n){(0,i.ow)(e=>({...e,traits:{...e.traits,[t]:n}}))}async function l(t){var n;return null!==(n=(0,i.qB)().traits[t])&&void 0!==n?n:[]}async function f(t){(0,i.ow)(n=>{let e={...n.uploads},r={...n.normalized},i={...n.traits},a={...n.rawFiles};return delete e[t],delete r[t],delete i[t],delete a[t],{...n,uploads:e,normalized:r,traits:i,rawFiles:a}})}async function E(t){let n=(0,r.O)("share"),e={...t,id:n,createdAt:new Date().toISOString()};return(0,i.ow)(t=>({...t,shares:{...t.shares,[n]:e}})),e}async function d(t,n){(0,i.ow)(e=>{let r=e.shares[t];return r?{...e,shares:{...e.shares,[t]:{...r,...n}}}:e})}async function _(t){var n;return null!==(n=(0,i.qB)().shares[t])&&void 0!==n?n:null}async function I(t){return Object.values((0,i.qB)().shares).filter(n=>n.userId===t)}async function w(){return(0,i.qB)().settings}async function B(t){(0,i.ow)(n=>({...n,settings:{...n.settings,...t}}))}async function p(t){(0,i.ow)(n=>{let e=Object.values(n.uploads).filter(n=>n.userId!==t),r=new Set(Object.values(n.uploads).filter(n=>n.userId===t).map(t=>t.id)),i={};e.forEach(t=>{i[t.id]=t});let a={};Object.entries(n.normalized).forEach(t=>{let[n,e]=t;r.has(n)||(a[n]=e)});let u={};Object.entries(n.traits).forEach(t=>{let[n,e]=t;r.has(n)||(u[n]=e)});let o={};Object.entries(n.rawFiles).forEach(t=>{let[n,e]=t;r.has(n)||(o[n]=e)});let s={};return Object.entries(n.shares).forEach(n=>{let[e,r]=n;r.userId!==t&&(s[e]=r)}),{...n,uploads:i,normalized:a,traits:u,rawFiles:o,shares:s,sessions:{...n.sessions,currentUserId:void 0}}})}},753:function(t,n,e){e.d(n,{H6:function(){return o},g7:function(){return u}});var r=e(1860),i=e(2860);async function a(){let t=(0,i.qB)();if(t.encryptionKey)return t.encryptionKey;let n=await (0,r.cU)();return(0,i.ow)(t=>({...t,encryptionKey:n})),n}async function u(t,n,e,u,o,s){if(u){let t=null!=o?o:await a(),u=await (0,r.Pj)(e,t);(0,i.ow)(t=>({...t,rawFiles:{...t.rawFiles,[n]:{uploadId:n,data:u.data,iv:u.iv,encrypted:!0,createdAt:new Date().toISOString(),expiresAt:s}}}));return}let c=function(t){let n=new Uint8Array(t),e="";return n.forEach(t=>{e+=String.fromCharCode(t)}),btoa(e)}(e);(0,i.ow)(t=>({...t,rawFiles:{...t.rawFiles,[n]:{uploadId:n,data:c,encrypted:!1,createdAt:new Date().toISOString(),expiresAt:s}}}))}async function o(t,n){(0,i.ow)(t=>{let e={...t.rawFiles};return delete e[n],{...t,rawFiles:e}})}},2860:function(t,n,e){e.d(n,{ow:function(){return o},qB:function(){return u},ui:function(){return s}});var r=e(885);let i="genomelink_mvp_store",a={users:{},uploads:{},normalized:{},traits:{},shares:{},rawFiles:{},settings:{retentionDays:r.X6||7,encryptionEnabled:r.oo},sessions:{}};function u(){let t=window.localStorage.getItem(i);if(!t)return{...a};try{var n,e;let r=JSON.parse(t);return{...a,...r,settings:{...a.settings,...null!==(n=r.settings)&&void 0!==n?n:{}},sessions:{...a.sessions,...null!==(e=r.sessions)&&void 0!==e?e:{}}}}catch(t){return{...a}}}function o(t){let n=t(u());return window.localStorage.setItem(i,JSON.stringify(n)),n}function s(t){return o(n=>({...n,sessions:{...n.sessions,currentUserId:t}}))}},3202:function(t,n,e){e.d(n,{O:function(){return r}});function r(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";return"undefined"!=typeof crypto&&"randomUUID"in crypto?"".concat(t,"_").concat(crypto.randomUUID()):"".concat(t,"_").concat(Math.random().toString(36).slice(2,10))}}}]);